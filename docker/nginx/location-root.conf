location / {
    try_files $uri $uri/ /index.php?_url=$uri&$args;
}

location ~ [^/]\.php(/|$) {
    fastcgi_pass  php;

    fastcgi_split_path_info ^(.+?\.php)(/.*)$;
    include fastcgi_params;

    if (!-f $document_root$fastcgi_script_name) {
        return 404;
    }

    fastcgi_param PATH_INFO       $fastcgi_path_info;
    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
}

location ~ /\.ht {
    deny all;
}

location ~* \.(js|css|png|jpg|jpeg|gif|ico)$ {
    expires       max;
    log_not_found off;
    access_log    off;
}